/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/finance/init",["$","dist/application/app"],function(a){"use strict";var b=a("$"),c=a("dist/application/app"),d=c.config,e=c.method;b(document).on("click",".js_sort_oper",function(){var a=b(this),c=a.closest("tr").data("id"),f=a.data("type"),g=a.closest("table").data("path");e.post(g,function(a){d.issucceed(a)?d.msg.info(a.message,a.url):d.msg.error(a.message)},d.lang.saveError,!1,{id:c,sort:f})}),b(document).on("click",".js_withdrawal_set",function(){var a=(b(this),b(".js_withdrawal_set_modal")),c=b("input[type='radio']:checked",a),d=c.data("type"),e=b(".js_withdrawal_set_save",a);d&&(e.addClass("hide"),b(".js_withdrawal_set_save_"+d,a).removeClass("hide")),a.modal("show")}),b(document).on("click",".js_withdrawal_set_select input[type='radio']",function(){var a=b(this),c=a.closest("form"),d=a.data("type"),e=b(".js_withdrawal_set_save",c);d&&(e.addClass("hide"),b(".js_withdrawal_set_save_"+d,c).removeClass("hide"))}),b(document).on("click",".js_withdrawal_set_save_all",function(){var a=b(this),c=a.closest("form"),e=b(".js_tips",c),f=a.data("path");c.valid()&&(a.prop("disabled",!0),b.ajax(f,{type:"post",data:{},dataType:"json"}).done(function(b){d.issucceed(b)?(b.balance>0?e.removeClass("hide"):(e.addClass("hide"),c.submit()),b.message&&d.msg.info(b.message)):d.msg.error(b.message),a.prop("disabled",!1)}).fail(function(){a.prop("disabled",!1),d.msg.info(d.lang.exception)}))})});