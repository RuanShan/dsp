/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/shopping/materialList/init",["$","dist/application/app","masonry"],function(a){"use strict";{var b,c=a("$"),e=a("dist/application/app"),f=e.config;e.method}a("masonry"),c(function(){b=c(".row-fluid").masonry()}),c(document).on("click",'ul li [data-toggle="ajaxRemoveMaterial"]',function(a){a.preventDefault();var e=c(this),g=e.data("remote")||e.attr("href"),h=e.data("confirm");h="undefined"==typeof h?!0:h;var i=function(){var a=e.html();e.html('<i class="fa fa-spinner fa-spin"></i>'),c.post(g).done(function(d){if(f.issucceed(d)){f.msg.suc(d.message||f.lang.removeSuccess,d.url);var g=e.closest("div.show_item"),h=c("div.show_item");1==h.length?window.location.reload():b.masonry("remove",g).masonry("layout")}else e.html(a),f.msg.error(d.message||f.lang.removeError,d.url)}).fail(function(){e.html(a),f.msg.info(f.lang.exception,d.url)})};h&&f.msg.msgbox.confirm(e.data("msg")||f.lang.confirmRemove,function(a){a&&i()}),!h&&i()}),c(document).on("mouseenter",".js_show_delTelBtn",function(){var a=c(this),b=a.find(".js_del_tel");b.removeClass("hide")}),c(document).on("mouseleave",".js_show_delTelBtn",function(){var a=c(this),b=a.find(".js_del_tel");b.addClass("hide")}),c(document).on("click",".js_del_tel",function(a){a.stopPropagation();var b=c(this),d=b.data("tel"),e=b.data("id"),g=b.data("url"),h=b.parent();c.post(g,{tel:d,id:e}).done(function(a){f.issucceed(a)?(f.msg.suc(a.message||f.lang.removeSuccess,a.url),h.remove()):f.msg.error(a.message||f.lang.removeError,a.url)}).fail(function(){f.msg.info(f.lang.exception)})}),c(document).on("click",".js_insert_tel",function(){var a=c(this),b=a.data("tel"),d=c(".js_mobile_number"),e=d.val();-1==e.indexOf(b)?(d.val(e+" "+b),d.focus().blur()):f.msg.suc("此电话号码已添加！")})});