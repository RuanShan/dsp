/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/rotate/init",["$","rotate","./template/page.html"],function(a,b){"use strict";var c=a("$");a("rotate");var d=a("./template/page.html");b.init=function(){c("body").append(d),c(document).on("click",".alert_big_imgs",function(){function a(){var a=c(window).width(),d=c(window).height(),f=a/d;if(f>b){var g=.9*d;g>e.height&&(g=e.height);var h=(d-g)/2,i=g*b,j=(a-i)/2;c(".js_alert_img_rotate .images").css({height:g,top:h,width:i,left:j})}else c(".js_alert_img_rotate .images").css({height:"90%",width:"auto"})}var b,d=c(this).children(".alert_big_img").attr("data-src"),e=new Image,f=0;e.src=d,c(".js_alert_img_rotate .images .img").rotate(f),c(".js_alert_img_rotate .images img").css({left:0,top:0,width:"100%",height:"auto"}),e.onload=function(){b=e.width/e.height,c(".js_alert_img_rotate").fadeIn(),c(".js_alert_img_rotate .images").css({maxWidth:e.width,maxHeight:e.height}),c(".js_alert_img_rotate .images img").attr("src",d),c(".cayt").attr("href",d),a(),c(window).on("resize",a)},c(".fr-close").on("click",function(){c(window).off("resize",a),c(".xz").off("click"),c(".js_alert_img_rotate").fadeOut()}),c(".xz",c(".js_alert_img_rotate")).on("click",function(){f+=90,f%=360,c(".js_alert_img_rotate .images .img").rotate(f);var d=e.width;if(e.width=e.height,e.height=d,b=e.width/e.height,a(),f%180==0)c(".js_alert_img_rotate .images img").css({left:0,top:0,width:"100%",height:"auto"});else{var g=c(".js_alert_img_rotate .images").width(),h=c(".js_alert_img_rotate .images").height(),i=(h-g)/2;c(".js_alert_img_rotate .images img").css({left:-i,top:i,width:h,height:g})}})})}}),define("dist/rotate/template/page.html",[],'<div class="alert_img js_alert_img_rotate">\n    <div class="mybg"></div>\n    <div class="images fr-window-fresco">\n        <img src="" alt="" class="img" />    \n        <div class="fr-close">\n            <span class="fr-close-background"></span>\n            <span class="fr-close-icon"></span>\n        </div>\n        <div class="myline">\n            <a href="javascript:;" class="cayt" target="_blank">查看原图</a>\n            <a href="javascript:;" class="xz">旋转</a>\n        </div>\n    </div>\n</div>');