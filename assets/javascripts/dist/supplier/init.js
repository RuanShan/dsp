/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/supplier/init",["$","dist/application/app","./selfSupply"],function(a){"use strict";function b(a){d(".js_classes_show").addClass("hide").find("input").addClass("wizard-ignore").prop("disabled",!0),d(".js_classes_show_"+a).removeClass("hide").find("input").removeClass("wizard-ignore").prop("disabled",!1)}function c(a){var b=a,c=d(".js_register_select"),e=b.data("type"),f=d(".js_submit_register_select");c.addClass("hide").find("input").prop("disabled",!0),f.addClass("hide"),d(".js_"+e).removeClass("hide").find("input").prop("disabled",!1),d(".js_submit_"+e).removeClass("hide")}var d=a("$"),e=a("dist/application/app"),f=e.config,g=e.method;a("./selfSupply");var h=d(".add-content").find("div.form-group").length,i=d(".add-industry").find("div.form-group").length,j=d("#edited").val();i>1&&d(".add-industry").find("button.del").removeClass("hide"),"1"==j&&d(".set-usename").addClass("hide"),d("#add_more").on("click",function(){var a,b={};h++,b.num=h,a=template("js_more_temp",b),d(a).insertBefore(d(this).parent())}),d("#add_industry").on("click",function(){var a,b={};h=d(".add-industry").find("div.form-group").length,b.num=h+1;d(".add-industry").find("div.form-group:last");a=template("js_industry_temp",b),d(a).insertBefore(d(this).parent()),b.size=d(".add-industry").find("div.form-group").length,d(".add-industry").find("div.form-group").length>1&&d(".add-industry").find("button.del").removeClass("hide")}),d(document).on("click","button.del",function(){d(this).closest("div.form-group").remove(),d(".add-industry").find("div.form-group").length<=1&&d(".add-industry").find("button.del").addClass("hide"),k()});var k=function(){d(".add-industry .form-group").each(function(a){var b=a+1,c=d(this).find("[data-required-box='input']").data("name");d(this).find("label.control-label").html("行业资质"+b+"："),d(this).find("[data-required-box='input']").attr({name:""+c+"["+b+"]"})})},l=d('[data-toggle="method1"]',d(".form-validate"));if(l.length>0){var m,n=d("#method"),o=!1,p=l.data("confirm");l.on("click",function(){var a=d(this),b=a.data("method"),c=function(){n.val(b),l.closest("form").submit()};if(p&&f.msg.msgbox.confirm(l.data("msg")||f.lang.confirmCloseOrder,function(a){a&&c()}),l.closest("form").valid()){var e=[];if(d("[data-required-box='input']").each(function(){""==d(this).val()?(m=d(this).data("msg"),o=!0):e.push(d(this))}),e.length==d("[data-required-box='input']").length&&(o=!1),o)return void f.msg.error("请上传{0}".format(m));window.formValided&&!p&&g.validKindEditor()&&c()}})}d(".switch_account").length&&d(".switch_account").on("change",function(){d(this).data("val")?d("div.js_password").addClass("hide"):d("div.js_password").removeClass("hide")}),d(".switch_account:checked").data("val")?d("div.js_password").addClass("hide"):d("div.js_password").removeClass("hide"),d(document).on("change",".js_change_bank",function(){var a=d(this).find("option:selected").data("box");d("div.js_hide").addClass("hide"),d("."+a).removeClass("hide")}),d(".js_all").click(function(){d(this).prop("checked")?d(this).closest("td").next("td").find("input").attr("checked",!0):d(this).closest("td").next("td").find("input").attr("checked",!1)});var q=d(".js_classes_select");q.length&&function(){var a=q.val();b(a)}(),d(document).on("click",".js_classes_select",function(){b(d(this).val())}),d(document).on("click",".js_account_type",function(){c(d(this))});var r=d(".js_account_type:checked");r.length&&function(){c(r)}(),d(document).on("click",".js_submit_register",function(){var a=d(this),b=a.closest("form"),c=d("#register_uersnam"),e=a.data("msg");b.valid()&&f.msg.msgbox.confirm(e+c.val(),function(a){a&&b.submit()})}),window.multyInvestGames=function(a){var b=d(".js_error_account_pwd"),c=(d("#add_account_form"),d(".js_investgames_modal")),e=c.data("id");1==a.status?(b.addClass("hide"),a.id=e,d("#investgames_lists").html(template("investgames_template",a)),c.modal("show")):b.html(a.message).removeClass("hide")},window.clearId=function(){d(".js_aid_id").val("");var a=d(".js_investgames_modal");d(".js_investgames_save",a).button("reset")},d(document).on("click",".js_submit_noregister",function(){var a=d(this),b=a.closest("form"),c=d("#noregister_uersnam"),e=a.data("msg");b.valid()&&f.msg.msgbox.confirm(e+c.val(),function(a){a&&b.submit()})}),d(document).on("click",".js_investgames_list",function(){var a=d(this),b=a.hasClass("active");d(".js_investgames_list").removeClass("active"),b?a.removeClass("active"):a.addClass("active")}),d(document).on("click",".js_investgames_save",function(){var a=d(this),b=(a.closest("form"),d("#add_account_form")),c=d(".js_aid_id"),e=d(".js_investgames_list.active"),g=e.data("id");e.length?(c.val(g),b.submit(),a.button("loading")):f.msg.info("请选择公众号")}),d(".js_commision:checked").length>0?1==d(".js_commision:checked").val()&&d(".js_output").hide():d(".js_output").hide(),d(document).on("click",".js_commision",function(){var a=d(this).val();0==a?d(".js_output").show():d(".js_output").hide()}),d(".js_firs").live("click",function(){d(this).find("input").prop("checked")?d(this).next("td").find("input").attr("checked",!0):d(this).next("td").find("input").attr("checked",!1)}),d(".js_sec input").live("click",function(){if(d(this).prop("checked"))d(this).parents("td").prev("td").find("input").attr("checked",!0);else{var a=d(this).parents("td").find("input"),b=a.size(),c=0,e=d(this);a.each(function(){d(this).prop("checked")||(c++,c==b&&e.parents("td").prev("td").find("input").attr("checked",!1))})}}),window.updateLabel=function(b){function c(a){if(a.loading)return a.text;var b="<li>"+a.value+"</li>";return b}function e(a){return a.value||a.text}var g=(d(".js_add_label"),d('[data-toggle="select2_4"]',document)),h=[],i=!0;if(d('[data-toggle="select2_4"] option').each(function(){h.push(d(this).attr("value"))}),g.empty(),d("ul.select2-selection__rendered .select2-selection__choice").each(function(a){var c=d(this).text().substring(1);g.append("<option value="+h[a]+" selected>"+c+"</option>"),c==b.value&&(i=!1,f.msg.info("已添加该品牌"))}),i){g.append("<option value="+b.key+" selected>"+b.value+"</option>");var j=d(".js_modal .init").val(),k={};k.id=b.key,k.text=j,console.log(k.text);var l=template("trademark_temp",k);d(l).appendTo(d(".js_trademark")),u.push(j),x.push(b.key.toString())}g.length>0&&a.async(["select2_4"],function(){g.each(function(){{var a=d(this),b={},g=a.data("maxcount"),h=a.data("chang"),i=a.data("remote")||a.attr("href"),j=a.data("pid");a.data("msgRequired")||a.data("placeholder")}if(g&&(b.maximumSelectionSize=g),h)switch(h){case"submit":a.on("change",function(){a.closest("form ").submit()})}i?(void 0!=j&&(i=i.format(j)),a.select2({ajax:{url:i,dataType:"json",delay:500,data:function(a){return{q:a.term,page:a.page||1}},processResults:function(b,c){return f.issucceed(b)?(c.page=c.page||1,1==c.page&&b.items.unshift({id:"js_select2_4placeholder",value:a.data("placeholder")}),{results:b.items,pagination:{more:c.page*b.page_num<b.total_count}}):void f.msg.error(b.message||f.lang.sendError)},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:0,templateResult:c,templateSelection:e})):a.select2(b),a.change(function(){var a=d(this);"js_select2_4placeholder"==a.val()&&a.find("option:selected").attr("value","")})})})},d("#next").click(function(){if(1==d("#secondStep").is(":visible")){var a=[];d(".js_classes_show input:checked").each(function(b,c){a.push(c.value)});var b={};b.select=d(".js_classes_select").val(),b.checkbox=a,d.ajax({type:"post",url:window.path,data:b,dataType:"json"}).done(function(a){if(0==a.status){d(".js_category").html("");var b=template("category_temp",a);d(b).appendTo(d(".js_category"))}}).fail(function(){window.msg.info("网络异常请重试")})}});var s,t,u=[],v=[],w=[],x=[],y=[],z=[];d(document).ready(function(){x=d(".js_add_label").val(),null==x&&(x=[]),s=d(".select2-selection__choice").text(),u=s.split("×"),u.splice(0,1)}),d(document).on("change",".js_add_label",function(){if(y=d(".js_add_label").val(),t=d(".select2-selection__choice").text(),v=t.split("×"),v.splice(0,1),w=[],z=[],v.length>u.length){for(var a=0;a<v.length;a++)-1==u.indexOf(v[a])&&w.push(v[a]);for(var a=0;a<y.length;a++)-1==x.indexOf(y[a])&&z.push(y[a]);u=u.concat(w),x=x.concat(z);var b={};b.text=w[0],b.id=z[0];var c=template("trademark_temp",b);d(c).appendTo(d(".js_trademark"))}else if(v.length<u.length){for(var a=0;a<u.length;a++)-1==v.indexOf(u[a])&&(w.push(u[a]),u.splice(a,1));d(".js_title").each(function(){d(this).html()==w[0]&&d(this).closest(".trademark_list").remove()})}}),d(document).on("click",".js_putin",function(){var a=d(".js_hideval").val(),b=d(this);b.closest("form").valid()&&a&&b.submit(),a||d(".js_tipnone").removeClass("hide")}),d(document).on("callback",'[data-toggle="selectimg"]',function(a){a&&d(".js_tipnone").addClass("hide")})}),define("dist/supplier/selfSupply",["$","dist/application/app"],function(a){"use strict";{var b=a("$"),c=a("dist/application/app");c.config,c.method}b(document).on("change",".selfpay",function(){var a=b(this),c=(a.val(),a.find("option:selected").data("type"));"selfpaytype_qxz"==c?(b(".selfcon_zfb").addClass("hide"),b(".selfcon_yhk").addClass("hide"),b(".selfcon_gjzh").addClass("hide")):"selfpaytype_zfb"==c?(b(".selfcon_zfb").removeClass("hide"),b(".selfcon_yhk").addClass("hide"),b(".selfcon_gjzh").addClass("hide")):"selfpaytype_yhk"==c?(b(".selfcon_yhk").removeClass("hide"),b(".selfcon_zfb").addClass("hide"),b(".selfcon_gjzh").addClass("hide")):"selfpaytype_gjzh"==c&&(b(".selfcon_gjzh").removeClass("hide"),b(".selfcon_zfb").addClass("hide"),b(".selfcon_yhk").addClass("hide"))})});