/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/goodsnew/init",["$","dist/application/app","./goodsajax","./template/ajaxPage.html","./template/goodsajaxdistribution.html","./template/goodsajaxnewest.html","./template/ajaxPageNew.html","./template/goodsajax.html","./taoajax","../plupload/init","../plupload/uploadFile","jquery_ui","../plupload/template/imageTemp.html","../plupload/template/progress.html","../plupload/template/files.html"],function(a){"use strict";{var b=a("$"),c=a("dist/application/app");c.config}a("./goodsajax"),a("./taoajax"),b(document).on("click","input[type='checkbox'].js_page_all_goods",function(){b("#goods_select_all_input").val(b(this).is(":checked")?"true":"false")}),b(document).on("click","#movesubmit",function(){b("#moveform").submit()})}),define("dist/goodsnew/goodsajax",["$","dist/application/app"],function(a){"use strict";function b(a,b){h.post(a,function(a){if(g.issucceed(a)){var b=a.data.data,c=[],d=a.data.totalPage,f=a.data.currentPage;if(b){for(var h=0,i=b.length;i>h;h++)e.inArray(b[h].id,window.freeship_data.goods)>-1&&(b[h].checked=!0);if(d>0)if(d-f>=2){var n=1,o=5;n=f-2>0?f-2:1,o=n+4;for(var h=n;o>=h;h++)h>0&&d>=h&&c.push(h)}else{var n=1,o=5;o=d>=f+2?f+2:d,n=o-4;for(var h=n;o>=h;h++)h>0&&d>=h&&c.push(h)}}a.data.pagelist=c,a.data.selected=m.hasClass(k);var p=template.compile(j+l)(a.data);if(m.html(p),!m.hasClass(k)){var i=e(".list-goods li",m).length,q=e(".list-goods li.selected",m).length,r=e(".list-goods li.disabled",m).length;i==q+r&&e(".js_page_goods",m).prop("checked",!0)}}else g.msg.error(a.message)},g.lang.exception,!1,b)}function c(a,b,c){if(c){var d=e.inArray(a,b);d>-1&&b.splice(d,1)}else b.push(a);b.length>0?(o.length>0&&o.val(window.freeship_data.goods),p.length>0&&p.html(b.length)):(o.length>0&&o.val(""),p.length>0&&p.html(0))}function d(a){var b=(e("#goods_select_type"),a.data("type")),c=e(".js_type_goods_div");c.addClass("hide"),e(".js_type_goods_"+b).removeClass("hide"),e("#goods_select_type").val(a.val())}var e=a("$"),f=a("dist/application/app"),g=f.config,h=f.method,i=e('[data-id="putaway"]'),j="",k="",l=a("dist/goodsnew/template/ajaxPage.html");window.freeship_data.type&&"distribution"==window.freeship_data.type?j=a("dist/goodsnew/template/goodsajaxdistribution.html"):window.freeship_data.type&&"newest"==window.freeship_data.type?(j=a("dist/goodsnew/template/goodsajaxnewest.html"),l=a("dist/goodsnew/template/ajaxPageNew.html"),k="newest-selected"):j=a("dist/goodsnew/template/goodsajax.html");var m=e("#goods_show"),n=e("#putaway form").serialize(),o=e("#goods_select_input"),p=e(".js_goods_count");i.length>0&&b(i.data("path"),n),e('a[data-toggle="tab"]').on("show.bs.tab",function(){m.html('<i class="fa fa-spinner fa-spin"></i>')}),e('a[data-toggle="tab"]').on("shown.bs.tab",function(a){{var c=e(a.target),d=c.data("path"),f=c.data("id"),g=e("#"+f+" form").serialize(),h=e("div.tab-pane.active");e(".js_page_goods",h)}"true"==e("#goods_select_all_input").val()?(g+="&ids="+window.freeship_data.goods,m.addClass(k),b(d,g)):"selected"==f?(g+="&ids="+window.freeship_data.goods,m.addClass(k),b(d,g)):(m.removeClass(k),b(d,g))}),e(document).on("click",".list-goods li",function(){var a=e(this),b=a.hasClass("selected"),d=a.hasClass("disabled"),f=a.data("id")+"",g=e("div.tab-pane.active"),h=e(".js_page_goods",g);d||(b?(a.removeClass("selected"),h.prop("checked",!1),m.hasClass(k),c(f,window.freeship_data.goods,!0)):(a.addClass("selected"),c(f,window.freeship_data.goods,!1)))}),e(document).on("click",".js_page_goods",function(){var a=e(this),b=a.prop("checked"),d=m.find(".list-goods li");d.each(b?function(){var a=e(this),b=a.data("id")+"",d=a.hasClass("disabled");d||a.hasClass("selected")||(a.addClass("selected"),c(b,window.freeship_data.goods,!1))}:function(){var a=e(this),b=a.data("id")+"",d=a.hasClass("disabled");!d&&a.hasClass("selected")&&(a.removeClass("selected"),c(b,window.freeship_data.goods,!0))})}),e(document).on("click","button[data-type='order']",function(){var a=e(this),c=a.closest("form"),d=e(a.data("order"),c),f=e(a.data("orderField"),c),g=d.val(),h=(f.val(),a.data("field")),i=e("button[data-type='order']",c),j=i.find("i"),k=a.find("i"),l=c.data("path"),m=e(".js_page_goods",c),n=e(".js_page",c);switch(i.removeClass("btn-danger"),j.addClass("fa-arrows-v").removeClass("fa-long-arrow-down fa-long-arrow-up"),f.val(h),n.val(1),m.prop("checked",!1),a.addClass("btn-danger"),g){case"desc":d.val("asc"),k.addClass("fa-long-arrow-up").removeClass("fa-arrows-v");break;case"asc":d.val("desc"),k.addClass("fa-long-arrow-down").removeClass("fa-arrows-v");break;default:d.val("desc"),k.addClass("fa-long-arrow-down").removeClass("fa-arrows-v")}var o=c.serialize();b(l,o)}),e(document).on("click","button[data-type='ajaxSearch']",function(){var a=e(this),c=a.closest("form"),d=c.data("path"),f=e(".js_page_goods",c),g=e(".js_page",c);g.val(1),f.prop("checked",!1);var h=c.serialize();b(d,h)}),e(document).on("change","select[data-type='ajaxSelectSearch']",function(){var a=e(this),c=a.closest("form"),d=c.data("path"),f=e(".js_page_goods",c),i=e(".js_page",c),j=a.data("path");if(i.val(1),f.prop("checked",!1),a.hasClass("js_search_select_type_select")){var k=a.find("option:selected").data("type");e(".js_search_select_type",c).addClass("hide").prop("disabled",!0).find("option").removeAttr("selected"),e(".js_search_select_type_"+k,c).removeClass("hide").prop("disabled",!1)}if(j){var l=e(a.data("target"));l.empty(),l.append(e("<option/>").attr("value","").text("全部")),h.post(j,function(a){var b="";e.each(a,function(a,c){b+="<option value="+c.value+">"+c.title+"</option>"}),l.append(b)},g.lang.exception,!1,{value:a.val()})}var m=c.serialize();b(d,m)}),e(document).on("click","footer[data-type='ajaxPage'] a",function(){var a=e(this),c=a.closest("li"),d=c.hasClass("disabled"),f=c.hasClass("active"),g=e("div.tab-pane.active"),h=g.attr("id"),i=g.find("form"),j=e("#putawayurl").data("path"),k=e(".js_page_goods",i),l=e(".js_page",i),m=a.data("pageNum");if(!d&&!f){l.val(m),e("footer[data-type='ajaxPage'] li.active").removeClass("active"),c.addClass("active"),k.prop("checked",!1);var n=i.serialize();"selected"==h&&(n+="&ids="+window.freeship_data.goods),b(j,n)}}),e(document).on("click",".js_goods_submit_btn",function(){return o.length>0&&o.val().length<1?(g.msg.error("请选择商品"),!1):void 0}),e(document).on("click",".js_goods_submit_part",function(){return o.length>0&&o.val().length<1&&!e(".js_party_goods").hasClass("hide")?(g.msg.error("请选择商品"),!1):void 0}),e(document).on("keypress",function(a){var a=a||event,b=a.keyCode||a.which||a.charCode;return 13==b?(e("div.tab-pane.active button[data-type='ajaxSearch']").trigger("click"),!1):void 0}),e(document).on("click",".js_goods_type_select input[type='radio']",function(){d(e(this))});var q=e(".js_goods_type_select input[type='radio']:checked");q.length&&function(){d(q)}(),e(document).on("click",".js_page_all_goods",function(){var a=e(this),b=a.prop("checked"),c=m.find(".list-goods li");c.each(b?function(){var a=e(this),b=(a.data("id")+"",a.hasClass("disabled"));b||a.hasClass("selected")||a.addClass("selected")}:function(){var a=e(this),b=(a.data("id")+"",a.hasClass("disabled"));!b&&a.hasClass("selected")&&a.removeClass("selected")})})}),define("dist/goodsnew/template/ajaxPage.html",[],'{{if count>0}}\n<footer class="footer bg-white b-t" data-type="ajaxPage">\n  <div class="row text-center-xs">\n      <div class="col-md-4 hidden-sm">\n          <p class="text-muted m-t">总共{{count}}条 当前为第{{currentPage}}页</p>\n      </div>\n      <div class="col-md-4 text-center">\n        <button type="submit" id="movesubmit" class="btn btn-primary js_goods_submit_btn" style="margin-top:8px;">选择完成，立即搬家</button>\n      </div>\n      <div class="col-md-4 col-sm-12 text-right text-center-xs">\n          <ul class="pagination pagination-sm m-t-sm m-b-none" data-apages-total="{{totalPage}}" data-apage-current="{{currentPage}}">\n\n            <li {{if currentPage==1}} class="disabled"{{/if}}>\n              <a href="javascript:;" rel="first" data-page-num="1"><i class="fa fa-angle-double-left" title="第一页"></i></a>\n            </li>\n            <li {{if currentPage==1}} class="disabled"{{/if}}>\n              <a href="javascript:;" rel="prev" data-page-num="{{currentPage-1}}"><i class="fa fa-angle-left" title="上一页"></i></a>\n            </li>\n            {{each pagelist as item}}\n              <li {{if currentPage==item}} class="active"{{/if}}>\n                <a href="javascript:;" data-page-num="{{item}}" data-page-isnum="true">{{item}}</a>\n              </li>\n            {{/each}}\n            <li {{if currentPage==totalPage}} class="disabled"{{/if}}><a href="javascript:;" rel="next" data-page-num="{{currentPage+1}}"><i class="fa fa-angle-right" title="下一页"></i></a></li>\n            <li {{if currentPage==totalPage}} class="disabled"{{/if}}><a href="javascript:;" rel="last" data-page-num="{{totalPage}}"><i class="fa fa-angle-double-right" title="最后页" ></i></a></li>\n          </ul>\n      </div>\n  </div>\n</footer>\n{{/if}}'),define("dist/goodsnew/template/goodsajaxdistribution.html",[],'{{if data}}\n  <ul class="list-goods list-unstyled clearfix">\n  {{each data as item}}\n    <li data-id="{{item.id}}" class="{{if item.checked}}selected{{/if}}" >\n        <div class="pull-left">\n          <img src="{{item.img}}">\n        </div>\n        <div class="pull-left m-t">\n          <div class="goods-name" title="{{item.name}}">{{item.name}}</div>\n          <div class="goods-label">\n           \n          </div>\n          <div class="clearfix">\n            <div class="pull-left goods-price">￥{{item.price}}</div>\n          </div>\n        </div>\n        <span class="selected-sign"></span>\n    </li>\n  {{/each}}\n \n  </ul>\n{{else}}\n<div>暂无数据</div>\n{{/if}}\n\n'),define("dist/goodsnew/template/goodsajaxnewest.html",[],'{{if data}}\n  <ul class="list-goods list-unstyled clearfix list-goods-newest">\n  {{each data as item}}\n    <li data-id="{{item.id}}" class="{{if item.checked}}selected{{/if}}  {{if item.msg!=\'\'}}disabled{{/if}}" >\n        <div class="pull-left">\n          <img src="{{item.img}}">\n        </div>\n        <div class="pull-left">\n          <div class="goods-name-new" title="{{item.name}}">{{item.name}}</div>\n          <div class="goods-label-new">\n            {{item.msg}}\n          </div>\n          <div class="clearfix">\n            <div class="pull-left goods-price" style="width:80px">￥{{item.price}}</div>\n            <div class="pull-left goods-count" style="width:80px">{{item.move}}</div>\n          </div>\n        </div>\n        <span class="selected-sign"></span>\n    </li>\n  {{/each}}\n \n  </ul>\n{{else}}\n<div>暂无数据</div>\n{{/if}}\n\n'),define("dist/goodsnew/template/ajaxPageNew.html",[],'<footer class="footer bg-white b-t" data-type="ajaxPage">\n  <div class="row text-center-xs">\n      <div class="col-md-2 hidden-sm">\n        <div class="text-muted" style="margin-top:8px">\n          {{if !selected}}\n          <label class="checkbox-inline">\n            <input type="checkbox" class="js_page_goods" />        \n            选择本页\n          </label>\n          {{/if}}\n          <!--{{if count>0}} \n          <label class="checkbox-inline">\n            总共{{count}}条 当前为第{{currentPage}}页\n          </label>\n          {{/if}} -->\n        </div>\n      </div>\n      {{if count>0}}\n      <div class="col-md-10 col-sm-12 text-right text-center-xs">\n\n          <ul class="pagination pagination-sm m-t-sm m-b-none pull-right" data-apages-total="{{totalPage}}" data-apage-current="{{currentPage}}">\n\n            <li {{if currentPage==1}} class="disabled"{{/if}}>\n              <a href="javascript:;" rel="first" data-page-num="1"><i class="fa fa-angle-double-left" title="第一页"></i></a>\n            </li>\n            <li {{if currentPage==1}} class="disabled"{{/if}}>\n              <a href="javascript:;" rel="prev" data-page-num="{{currentPage-1}}"><i class="fa fa-angle-left" title="上一页"></i></a>\n            </li>\n            {{each pagelist as item}}\n              <li {{if currentPage==item}} class="active"{{/if}}>\n                <a href="javascript:;" data-page-num="{{item}}" data-page-isnum="true">{{item}}</a>\n              </li>\n            {{/each}}\n            <li {{if currentPage==totalPage}} class="disabled"{{/if}}><a href="javascript:;" rel="next" data-page-num="{{currentPage+1}}"><i class="fa fa-angle-right" title="下一页"></i></a></li>\n            <li {{if currentPage==totalPage}} class="disabled"{{/if}}><a href="javascript:;" rel="last" data-page-num="{{totalPage}}"><i class="fa fa-angle-double-right" title="最后页" ></i></a></li>\n          </ul>\n          <span class="pull-right text-muted m-r-sm" style="margin-top:15px">总共{{count}}条 当前为第{{currentPage}}页</span>\n      </div>\n      {{/if}}\n  </div>\n</footer>'),define("dist/goodsnew/template/goodsajax.html",[],'{{if data}}\n  <ul class="list-goods list-unstyled clearfix">\n  {{each data as item}}\n    <li data-id="{{item.id}}" class="{{if item.checked || isAllSel}}selected{{/if}}  {{if item.store==0}}disabled{{/if}}" >\n        <div class="pull-left">\n          <img src="{{item.img}}">\n        </div>\n        <div class="pull-left m-t">\n          <div class="goods-name" title="{{item.name}}">{{item.name}}</div>\n          <div class="goods-label">\n            {{each item.label as text}}\n              <span class="label label-danger">{{text}}</span>\n            {{/each}}\n          </div>\n          <div class="clearfix">\n            <div class="pull-left goods-price">￥{{item.price}}</div>\n            <div class="pull-left goods-count">{{item.move}}</div>\n          </div>\n        </div>\n        <span class="selected-sign"></span>\n    </li>\n  {{/each}}\n \n  </ul>\n{{else}}\n<div>暂无数据</div>\n{{/if}}\n\n'),define("dist/goodsnew/taoajax",["$","dist/application/app","dist/plupload/init","dist/plupload/uploadFile","jquery_ui"],function(a){"use strict";function b(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var a=["msxml","msxml2","msxml3","Microsoft"],b=0;b<a.length;b++)try{var c=a[b]+".XMLHTTP";return new ActiveXObject(c)}catch(d){}return null}function c(a){g("#line .xian").css({width:parseInt(100*a.loaded/a.total)})}function d(a){var b=a.currentTarget;if(4==b.readyState){i.msg.info("保存成功！");var c=JSON.parse(b.response);window.location.href=c.url}else i.msg.info("保存失败")}function e(){i.msg.info("保存失败")}function f(){i.msg.info("放弃上传")}var g=a("$"),h=a("dist/application/app"),i=h.config,j=(a("dist/plupload/init"),!1);g(document).on("click","#submitData",function(){j||g("#fileToUpload").click()}),g(document).on("change","#fileToUpload",function(){if(!j){var a=g("#file_id .file").get(0).files[0];if(g("#help_mc_btn").hide(),void 0==a)return i.msg.info("请选择文件！"),!1;if(a.size>3145728)return i.msg.info("文件太大了！"),!1;var h=a.name.split(".");if(h=h[h.length-1],"csv"!=h)return i.msg.info("格式不正确！"),!1;try{var k=new FormData;k.append("fileToUpload",g("#file_id .file").get(0).files[0]);var l=b();l.upload.addEventListener("progress",c,!1),l.addEventListener("load",d,!1),l.addEventListener("error",e,!1),l.addEventListener("abort",f,!1),l.open("POST",g("#ajaxFrom").attr("action")),l.send(k),j=!0}catch(m){j=!0,g("#ajaxFrom").submit()}return!1}})}),define("dist/plupload/init",["dist/plupload/uploadFile","$","dist/application/app","jquery_ui"],function(a){"use strict";a("dist/plupload/uploadFile")}),define("dist/plupload/uploadFile",["$","dist/application/app","jquery_ui"],function(require,exports,module){"use strict";var $=require("$"),app=require("dist/application/app"),config=app.config,method=app.method;require("jquery_ui");var imageTemp=require("dist/plupload/template/imageTemp.html"),progressTemp=require("dist/plupload/template/progress.html"),filesTemp=require("dist/plupload/template/files.html"),render_item=template.compile(imageTemp),render_progress=template.compile(progressTemp),render_files=template.compile(filesTemp),uploadimte=null;window.files_data&&window.files_data.file_item.length>0&&$(".js_fileList",".js_upload_container").append(render_files(window.files_data)),window.upload_config&&$(".js_new_upload").each(function(){var $el=$(this),$form=$el.closest(".js_upload_container"),sname=$el.data("submitname"),upload_path=$el.data("uploadpath"),deletepath=$el.data("delpath"),count=$el.data("count"),datas=eval("("+$el.data("data")+")")||null,extensions=$el.data("extensions"),maxSize=$el.data("maxsize"),max_count=count-($form.find("li.imgbox").length||0);if((void 0==count||""==count)&&(max_count=null),$el.uploader({multi:!0,url:upload_path,delete_path:deletepath,max_count:max_count,max_count_tips:count,dropElement:"drop",extensions:window.upload_config.extensions,max_file_size:window.upload_config.maxSize,data:datas,FilesAdded:function(a,b){$.each(b,function(a,b){$(".js_file_upload_queue",$form).append(render_progress({id:b.id,filename:b.name,filesize:Math.ceil(b.size/1024)}))})},UploadProgress:function(a,b){var c="upload{0}".format(b.id);if(uploadimte=$("#{0}".format(c)),uploadimte.length){var d=b.percent+"%";$(".data",uploadimte).text(d),$(".uploadify-progress-bar",uploadimte).width(d)}},FileUploaded:function(a,b,c){if($.isPlainObject(c)){var d=method.getfileExt(b.name).toString()||!1;c.file.explorer="jpg"==d||"gif"==d||"png"==d||"jpeg"==d?!0:!1,c.file.progressid=b.id,c.file.sname=sname,c.file.deletepath=deletepath,c.file.fileType=d,c.file.fileName=b.name,c.file.index=$form.find("li.imgbox").length,$(".js_fileList",$form).append(render_item(c.file)),uploadimte.remove()}else uploadimte.addClass("uploadify-error"),uploadimte.remove(),a.files.removeFile(b),config.msg.info(c||config.lang.uplodError)},UploadComplete:function(){$(".uploadify-progress-bar",uploadimte).remove()}},"other"),$("ul.ipost-list",$form).sortable({opacity:.8}),"draggable"in document.createElement("chooseDocument")){if("undefinde"==typeof window.FileReader)return;var holder=document.getElementById("chooseDocument"),drop=document.getElementById("drop");holder.ondragover=function(){return $("#drop").removeClass("hide"),!1},drop.ondragenter=function(){return $("#drop .dorp-dis").html("<strong>释放鼠标</strong>"),!1},holder.ondragleave=function(){return $("#drop .dorp-dis").html("<strong>请将文件拖拽至此区域</strong>"),!1},window.ondrop=function(a){a.preventDefault(),$("#drop").addClass("hide"),$("#drop .dorp-dis").html("<strong>请将文件拖拽至此区域</strong>");a.dataTransfer.files;return!1}}$(document).on("click","a.item_new_close",function(a){var b=$(this),c=b.data("progressid"),d=b.data("delpath");$.post(d,{id:b.data("post-id"),url:b.data("path")});var e=$(a.target).closest("li.imgbox");e.fadeOut(function(){e.remove(),$("#upload"+c).remove();var a=count-($form.find("li.imgbox").length||0),b=0;$form.find("li.imgbox").each(function(){$(this).find("a.item_new_close").data("progressid")&&b++}),count&&(c?$.data($el,"uploader").plupload.removeFile(c):$el.uploader("update",{max_count:a+b}))})})})}),define("dist/plupload/template/imageTemp.html",[],'{{if explorer}}\n<li class="imgbox" data-post-id="{{id}}" data-path="{{thumbnail}}">\n	<a class="item_new_close item_close" href="javascript:void(0)" data-delpath="{{deletepath}}" data-progressid="{{progressid}}" title="删除"  data-path="{{thumbnail}}" data-post-id="{{id}}"></a>  \n	<input type="hidden" value="{{id}}" name="{{sname}}[{{index}}][id]"> \n	<input type="hidden" value="{{thumbnail}}" name="{{sname}}[{{index}}][path]"> \n	<span class="item_box"><img src="{{path}}"></span>\n</li>\n{{else}}\n<li class="imgbox item" data-post-id="{{id}}" data-path="{{thumbnail}}">\n	<a class="item_new_close item_close" href="javascript:void(0)" data-delpath="{{deletepath}}" data-progressid="{{progressid}}" title="删除"  data-path="{{thumbnail}}" data-post-id="{{id}}"></a> \n	<div class="file_unit">\n        <span class="icon_filetype filetype_{{fileType}}"></span>\n        <p class="filetype_name">{{fileName}}</p>\n        <div class="choose_mode_style"></div>\n        <input type="hidden" value="{{id}}" name="{{sname}}[{{index}}][id]"> \n		<input type="hidden" value="{{thumbnail}}" name="{{sname}}[{{index}}][path]"> \n    </div>\n</li>\n{{/if}}'),define("dist/plupload/template/progress.html",[],'<div id="upload{{id}}" class="uploadify-queue-item">  \n	<span class="fileName">{{filename}} ({{filesize}}KB)</span>\n	<span class="data"> -上传完成 正在加载.....</span>   \n	<div class="uploadify-progress">                        \n		<div class="uploadify-progress-bar" style="width: 1%;"><!--Progress Bar-->\n		</div>                    \n	</div>                \n</div>'),define("dist/plupload/template/files.html",[],'{{each file_item as item index}}\n	{{if item.explorer}}\n	<li class="imgbox" data-post-id="{{item.file_id}}" data-path="{{item.thumbnail}}">\n		<a class="item_new_close item_close" href="javascript:void(0)" title="删除" data-delpath="{{item.deletepath}}"  data-path="{{item.thumbnail}}" data-progressid="{{item.progressid}}" data-post-id="{{item.file_id}}"></a>  \n		<span class="item_box"><img src="{{item.path}}"></span>\n	</li>\n	{{else}}\n	<li class="imgbox item" data-post-id="{{item.file_id}}" data-path="{{item.thumbnail}}">\n		<a class="item_new_close item_close" href="javascript:void(0)" title="删除" data-delpath="{{item.deletepath}}"  data-path="{{item.thumbnail}}" data-progressid="{{item.progressid}}" data-post-id="{{item.file_id}}"></a> \n		<div class="file_unit">\n	        <span class="icon_filetype filetype_{{item.format}}"></span>\n	        <p class="filetype_name">{{item.file_name}}</p>\n	        <div class="choose_mode_style"></div>\n	    </div>\n	</li>\n	{{/if}}\n{{/each}}');