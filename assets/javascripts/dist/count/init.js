/*! weimob_vshop_admin
*author:<a.b.c@hd3p.com> */
define("dist/count/init",["$","dist/application/app","dist/echarts/init"],function(a){"use strict";var b=a("$"),c=a("dist/application/app"),d=c.config,e=c.method,f=a("dist/echarts/init.js"),g=b("#distribute_echarts"),h=(b("#flow_echarts"),b("#v_echarts")),i=b("#sales_charts"),j=b("#area_charts"),k=b("#tendency_echarts");g.length&&function(){var a=g.data("path");a&&e.get(a,function(a){d.issucceed(a)?f.pie("distribute_echarts",a.data):d.msg.error(a.message)})}(),h.length&&function(){var a=h.data("path");a&&e.get(a,function(a){d.issucceed(a)?f.line("v_echarts",a.data,{toolbox:{show:!1}}):d.msg.error(a.message)})}(),k.length&&function(){var a=k.data("path");a&&e.get(a,function(a){d.issucceed(a)?f.line("tendency_echarts",a.data,{toolbox:{show:!1},isarea:!0}):d.msg.error(a.message)})}(),j.length&&function(){var b=j.data("path");b&&e.get(b,function(b){d.issucceed(b)?a.async(["dist/echartmap/init.js"],function(a){a.maps("area_charts",b,{tooltip:{formatter:function(a){var b=(isNaN((a[2]/a[5].total*100).toFixed(2))?0:(a[2]/a[5].total*100).toFixed(2),a[1]+"<br/>分销员数："+a[2]+"<br/>比例："+a[5].percent+"%<br>排名："+(a[2]>0?a[5].rank:0));return b}}})}):d.msg.error(b.message)})}(),i.length&&function(){var a=i.data("path");a&&e.get(a,function(a){d.issucceed(a)?f.line("sales_charts",a.data,{toolbox:{show:!1}}):d.msg.error(a.message)})}(),b(document).on("click",".js_interact_echarts",function(){var a=b(this),c=a.data("path"),g=a.data("type"),h=a.data("chartid");b(".js_on_echarts_type").val(g),a.hasClass("lt")&&(a.addClass("lt"),a.removeClass("lt")),b(".js_interact_echarts",a.closest("form")).removeClass("active"),a.addClass("active"),c&&e.get(c,function(a){d.issucceed(a)?f.line(h,a.data,{toolbox:{show:!1}}):d.msg.error(a.message)})}),b(document).on("click",".js_table_type_select",function(){var a=b(this),c=a.data("type"),d=a.closest("form");b(".js_table_type_select",d).removeClass("active"),b(".js_table_type",d).addClass("hide"),b(".js_table_type_"+c,d).removeClass("hide")}),b(document).on("click",'[data-toggle="compare"]',function(){b(".js_compare_modal_time").modal("show")})});