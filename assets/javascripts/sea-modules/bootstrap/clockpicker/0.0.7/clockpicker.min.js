/*!
 * ClockPicker v0.0.7 (http://weareoutman.github.io/clockpicker/)
 * Copyright 2014 Wang Shenwei.
 * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)
 */
define(function(c,b,a){var d=c("jquery");(function(i,k){var v=i(window),p=i(document),z;var l="http://www.w3.org/2000/svg",y="SVGAngle" in window&&(function(){var F,G=document.createElement("div");G.innerHTML="<svg/>";F=(G.firstChild&&G.firstChild.namespaceURI)==l;G.innerHTML="";return F})();var E=function(G){var F=G.split("");var J=F[0]-0,I=F[1]-0,K=0,H=I/2;if(I<5&&I>0){if(H<1.5){K=J+""+0}else{K=J+""+5}}else{if(I>5&&I>0){if(H<4){K=J+""+5}else{if(J+1>5){K="00"}else{K=J+1+"0"}}}else{K=J+""+I}}return K};var t=(function(){var F=document.createElement("div").style;return"transition" in F||"WebkitTransition" in F||"MozTransition" in F||"msTransition" in F||"OTransition" in F})();var n="ontouchstart" in window,w="mousedown"+(n?" touchstart":""),o="mousemove.clockpicker"+(n?" touchmove.clockpicker":""),j="mouseup.clockpicker"+(n?" touchend.clockpicker":"");var h=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null;function C(F){return document.createElementNS(l,F)}function x(F){return(F<10?"0":"")+F}var q=0;function s(F){var G=++q+"";return F?F+G:G}var u=100,B=80,m=54,g=13,r=u*2,f=t?350:1;var D=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");function A(F,J){var N=i(D),K=N.find(".clockpicker-plate"),Y=N.find(".clockpicker-hours"),O=N.find(".clockpicker-minutes"),af=N.find(".clockpicker-am-pm-block"),Z=F.prop("tagName")==="INPUT",S=Z?F:F.find("input"),U=F.find(".input-group-addon"),X=this,R;this.id=s("cp");this.element=F;this.options=J;this.isAppended=false;this.isShown=false;this.currentView="hours";this.isInput=Z;this.input=S;this.addon=U;this.popover=N;this.plate=K;this.hoursView=Y;this.minutesView=O;this.amPmBlock=af;this.spanHours=N.find(".clockpicker-span-hours");this.spanMinutes=N.find(".clockpicker-span-minutes");this.spanAmPm=N.find(".clockpicker-span-am-pm");this.amOrPm="PM";if(J.twelvehour){var P=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");var G=i(P);i('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){X.amOrPm="AM";i(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock);i('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){X.amOrPm="PM";i(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}if(!J.autoclose){i('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+J.donetext+"</button>").click(i.proxy(this.done,this)).appendTo(N)}if((J.placement==="top"||J.placement==="bottom")&&(J.align==="top"||J.align==="bottom")){J.align="left"}if((J.placement==="left"||J.placement==="right")&&(J.align==="left"||J.align==="right")){J.align="top"}N.addClass(J.placement);N.addClass("clockpicker-align-"+J.align);this.spanHours.click(i.proxy(this.toggleView,this,"hours"));this.spanMinutes.click(i.proxy(this.toggleView,this,"minutes"));S.on("focus.clockpicker click.clockpicker",i.proxy(this.show,this));U.on("click.clockpicker",i.proxy(this.toggle,this));var aa=i('<div class="clockpicker-tick"></div>'),ac,ad,T,M;if(J.twelvehour){for(ac=1;ac<13;ac+=1){ad=aa.clone();T=ac/6*Math.PI;M=B;ad.css("font-size","120%");ad.css({left:u+Math.sin(T)*M-g,top:u-Math.cos(T)*M-g});ad.html(ac===0?"00":ac);Y.append(ad);ad.on(w,ab)}}else{for(ac=0;ac<24;ac+=1){ad=aa.clone();T=ac/6*Math.PI;var ag=ac>0&&ac<13;M=ag?m:B;ad.css({left:u+Math.sin(T)*M-g,top:u-Math.cos(T)*M-g});if(ag){ad.css("font-size","120%")}ad.html(ac===0?"00":ac);Y.append(ad);ad.on(w,ab)}}for(ac=0;ac<60;ac+=5){ad=aa.clone();T=ac/30*Math.PI;ad.css({left:u+Math.sin(T)*B-g,top:u-Math.cos(T)*B-g});ad.css("font-size","120%");ad.html(x(ac));O.append(ad);ad.on(w,ab)}K.on(w,function(ah){if(i(ah.target).closest(".clockpicker-tick").length===0){ab(ah,true)}});function ab(am,ah){var ak=K.offset(),aj=/^touch/.test(am.type),ai=ak.left+u,ap=ak.top+u,ar=(aj?am.originalEvent.touches[0]:am).pageX-ai,aq=(aj?am.originalEvent.touches[0]:am).pageY-ap,an=Math.sqrt(ar*ar+aq*aq),ao=false;if(ah&&(an<B-g||an>B+g)){return}am.preventDefault();var al=setTimeout(function(){z.addClass("clockpicker-moving")},200);if(y){K.append(X.canvas)}X.setHand(ar,aq,!ah,true);p.off(o).on(o,function(av){av.preventDefault();var au=/^touch/.test(av.type),at=(au?av.originalEvent.touches[0]:av).pageX-ai,aw=(au?av.originalEvent.touches[0]:av).pageY-ap;if(!ao&&at===ar&&aw===aq){return}ao=true;X.setHand(at,aw,false,true)});p.off(j).on(j,function(av){p.off(j);av.preventDefault();var au=/^touch/.test(av.type),at=(au?av.originalEvent.changedTouches[0]:av).pageX-ai,aw=(au?av.originalEvent.changedTouches[0]:av).pageY-ap;if((ah||ao)&&at===ar&&aw===aq){X.setHand(at,aw)}if(X.currentView==="hours"){X.toggleView("minutes",f/2)}else{if(J.autoclose){X.minutesView.addClass("clockpicker-dial-out");setTimeout(function(){X.done()},f/2)}}K.prepend(I);clearTimeout(al);z.removeClass("clockpicker-moving");p.off(o)})}if(y){var I=N.find(".clockpicker-canvas"),W=C("svg");W.setAttribute("class","clockpicker-svg");W.setAttribute("width",r);W.setAttribute("height",r);var ae=C("g");ae.setAttribute("transform","translate("+u+","+u+")");var L=C("circle");L.setAttribute("class","clockpicker-canvas-bearing");L.setAttribute("cx",0);L.setAttribute("cy",0);L.setAttribute("r",2);var Q=C("line");Q.setAttribute("x1",0);Q.setAttribute("y1",0);var H=C("circle");H.setAttribute("class","clockpicker-canvas-bg");H.setAttribute("r",g);var V=C("circle");V.setAttribute("class","clockpicker-canvas-fg");V.setAttribute("r",3.5);ae.appendChild(Q);ae.appendChild(H);ae.appendChild(V);ae.appendChild(L);W.appendChild(ae);I.append(W);this.hand=Q;this.bg=H;this.fg=V;this.bearing=L;this.g=ae;this.canvas=I}e(this.options.init)}function e(F){if(F&&typeof F==="function"){F()}}A.DEFAULTS={"default":"",minutes5:false,fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:false,twelvehour:false,vibrate:true};A.prototype.toggle=function(){this[this.isShown?"hide":"show"]()};A.prototype.locate=function(){var I=this.element,K=this.popover,G=I.offset(),F=I.outerWidth(),L=I.outerHeight(),H=this.options.placement,J=this.options.align,N={},M=this;K.show();switch(H){case"bottom":N.top=G.top+L;break;case"right":N.left=G.left+F;break;case"top":N.top=G.top-K.outerHeight();break;case"left":N.left=G.left-K.outerWidth();break}switch(J){case"left":N.left=G.left;break;case"right":N.left=G.left+F-K.outerWidth();break;case"top":N.top=G.top;break;case"bottom":N.top=G.top+L-K.outerHeight();break}K.css(N)};A.prototype.show=function(I){if(this.isShown){return}e(this.options.beforeShow);var F=this;if(!this.isAppended){z=i(document.body).append(this.popover);v.on("resize.clockpicker"+this.id,function(){if(F.isShown){F.locate()}});this.isAppended=true}var H=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if(H[0]==="now"){var G=new Date(+new Date()+this.options.fromnow);H=[G.getHours(),G.getMinutes()]}this.hours=+H[0]||0;this.minutes=+H[1]||0;this.spanMinutes.html(this.options.minutes5?E(x(this.minutes)):x(this.minutes));this.toggleView("hours");this.locate();this.isShown=true;p.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(K){var J=i(K.target);if(J.closest(F.popover).length===0&&J.closest(F.addon).length===0&&J.closest(F.input).length===0){F.hide()}});p.on("keyup.clockpicker."+this.id,function(J){if(J.keyCode===27){F.hide()}});e(this.options.afterShow)};A.prototype.hide=function(){e(this.options.beforeHide);this.isShown=false;p.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id);p.off("keyup.clockpicker."+this.id);this.popover.hide();e(this.options.afterHide)};A.prototype.toggleView=function(F,I){var G=false;if(F==="minutes"&&i(this.hoursView).css("visibility")==="visible"){e(this.options.beforeHourSelect);G=true}var H=F==="hours",K=H?this.hoursView:this.minutesView,J=H?this.minutesView:this.hoursView;this.currentView=F;this.spanHours.toggleClass("text-primary",H);this.spanMinutes.toggleClass("text-primary",!H);J.addClass("clockpicker-dial-out");K.css("visibility","visible").removeClass("clockpicker-dial-out");this.resetClock(I);clearTimeout(this.toggleViewTimer);this.toggleViewTimer=setTimeout(function(){J.css("visibility","hidden")},f);if(G){e(this.options.afterHourSelect)}};A.prototype.resetClock=function(F){var K=this.currentView,M=this[K],H=K==="hours",N=Math.PI/(H?6:30),J=M*N,G=H&&M>0&&M<13?m:B,L=Math.sin(J)*G,I=-Math.cos(J)*G,O=this;if(y&&F){O.canvas.addClass("clockpicker-canvas-out");setTimeout(function(){O.canvas.removeClass("clockpicker-canvas-out");O.setHand(L,I)},F)}else{this.setHand(L,I)}};A.prototype.setHand=function(M,K,O,Q){var L=Math.atan2(M,-K),J=this.currentView==="hours",P=Math.PI/(J||O?6:30),I=Math.sqrt(M*M+K*K),S=this.options,R=J&&I<(B+m)/2,H=R?m:B,N;if(S.twelvehour){H=B}if(L<0){L=Math.PI*2+L}N=Math.round(L/P);L=N*P;if(S.twelvehour){if(J){if(N===0){N=12}}else{if(O){N*=5}if(N===60){N=0}}}else{if(J){if(N===12){N=0}N=R?(N===0?12:N):N===0?0:N+12}else{if(O){N*=5}if(N===60){N=0}}}if(this[this.currentView]!==N){if(h&&this.options.vibrate){if(!this.vibrateTimer){navigator[h](10);this.vibrateTimer=setTimeout(i.proxy(function(){this.vibrateTimer=null},this),100)}}}this[this.currentView]=N;if(J){this["spanHours"].html(x(N))}else{this["spanMinutes"].html(this.options.minutes5?E(x(N)):x(N))}if(!y){this[J?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var T=i(this);T.toggleClass("active",N===+T.html())});return}if(Q||(!J&&N%5)){this.g.insertBefore(this.hand,this.bearing);this.g.insertBefore(this.bg,this.fg);this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")}else{this.g.insertBefore(this.hand,this.bg);this.g.insertBefore(this.fg,this.bg);this.bg.setAttribute("class","clockpicker-canvas-bg")}var G=Math.sin(L)*H,F=-Math.cos(L)*H;this.hand.setAttribute("x2",G);this.hand.setAttribute("y2",F);this.bg.setAttribute("cx",G);this.bg.setAttribute("cy",F);this.fg.setAttribute("cx",G);this.fg.setAttribute("cy",F)};A.prototype.done=function(){e(this.options.beforeDone);this.hide();var F=this.input.prop("value"),G=x(this.hours)+":"+(this.options.minutes5?E(x(this.minutes)):x(this.minutes));if(this.options.twelvehour){G=G+this.amOrPm}this.input.prop("value",G);if(G!==F){this.input.triggerHandler("change");if(!this.isInput){this.element.trigger("change")}}if(this.options.autoclose){this.input.trigger("blur")}e(this.options.afterDone)};A.prototype.remove=function(){this.element.removeData("clockpicker");this.input.off("focus.clockpicker click.clockpicker");this.addon.off("click.clockpicker");if(this.isShown){this.hide()}if(this.isAppended){v.off("resize.clockpicker"+this.id);this.popover.remove()}};i.fn.clockpicker=function(G){var F=Array.prototype.slice.call(arguments,1);return this.each(function(){var J=i(this),I=J.data("clockpicker");if(!I){var H=i.extend({},A.DEFAULTS,J.data(),typeof G=="object"&&G);J.data("clockpicker",new A(J,H))}else{if(typeof I[G]==="function"){I[G].apply(I,F)}}})}}(window.jQuery))});
;

;
